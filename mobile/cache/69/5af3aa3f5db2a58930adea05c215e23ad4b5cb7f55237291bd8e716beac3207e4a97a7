{"dependencies":[{"name":"./FlutterwaveInitError","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":58,"index":58}}],"key":"kMklk9qCTUUcD5Y5DATlsyOJQjI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return ResponseParser;\n    }\n  });\n  var _FlutterwaveInitError = require(_dependencyMap[0], \"./FlutterwaveInitError\");\n  var FlutterwaveInitError = _interopDefault(_FlutterwaveInitError);\n  /**\n   * The purpose of this function is to parse the response message gotten from a\n   * payment initialization error.\n   * @param message string\n   * @param code string (optional)\n   * @returns {message: string; code: string}\n   */\n  function ResponseParser(_a) {\n    var status = _a.status,\n      errors = _a.errors,\n      message = _a.message,\n      data = _a.data,\n      code = _a.code,\n      error_id = _a.error_id;\n    return new Promise(function (resolve, reject) {\n      // return success message\n      if (status === 'success') {\n        // check if data or data link is missing\n        if (!data || !data.link) {\n          return reject(new FlutterwaveInitError.default({\n            code: 'MALFORMED_RESPONSE',\n            message: message\n          }));\n        }\n        // return the payment link\n        return resolve(data.link);\n      }\n      // missing authorization\n      if (/authorization/i.test(message) && /required/i.test(message)) {\n        reject(new FlutterwaveInitError.default({\n          code: 'AUTH_MISSING',\n          message: message\n        }));\n      }\n      // invalid authorization\n      if (/authorization/i.test(message) && /invalid/i.test(message)) {\n        reject(new FlutterwaveInitError.default({\n          code: 'AUTH_INVALID',\n          message: message\n        }));\n      }\n      // field errors\n      if (errors) {\n        reject(new FlutterwaveInitError.default({\n          code: 'INVALID_OPTIONS',\n          message: message,\n          errors: errors.map(function (i) {\n            return i.message;\n          })\n        }));\n      }\n      // defaults to the initially passed message\n      reject(new FlutterwaveInitError.default({\n        code: String(code || 'STANDARD_INIT_ERROR').toUpperCase(),\n        message: message,\n        errorId: error_id\n      }));\n    });\n  }\n});","lineCount":79,"map":[[12,2,9,15,"Object"],[12,8,9,15],[12,9,9,15,"defineProperty"],[12,23,9,15],[12,24,9,15,"exports"],[12,31,9,15],[13,4,9,15,"enumerable"],[13,14,9,15],[14,4,9,15,"get"],[14,7,9,15],[14,18,9,15,"get"],[14,19,9,15],[15,6,9,15],[15,13,9,15,"ResponseParser"],[15,27,9,15],[16,4,9,15],[17,2,9,15],[18,2,1,0],[18,6,1,0,"_FlutterwaveInitError"],[18,27,1,0],[18,30,1,0,"require"],[18,37,1,0],[18,38,1,0,"_dependencyMap"],[18,52,1,0],[19,2,1,0],[19,6,1,0,"FlutterwaveInitError"],[19,26,1,0],[19,29,1,0,"_interopDefault"],[19,44,1,0],[19,45,1,0,"_FlutterwaveInitError"],[19,66,1,0],[20,2,2,0],[21,0,3,0],[22,0,4,0],[23,0,5,0],[24,0,6,0],[25,0,7,0],[26,0,8,0],[27,2,9,15],[27,11,9,24,"ResponseParser"],[27,25,9,38,"ResponseParser"],[27,26,9,39,"_a"],[27,28,9,41],[27,30,9,43],[28,4,10,4],[28,8,10,8,"status"],[28,14,10,14],[28,17,10,17,"_a"],[28,19,10,19],[28,20,10,20,"status"],[28,26,10,26],[29,6,10,28,"errors"],[29,12,10,34],[29,15,10,37,"_a"],[29,17,10,39],[29,18,10,40,"errors"],[29,24,10,46],[30,6,10,48,"message"],[30,13,10,55],[30,16,10,58,"_a"],[30,18,10,60],[30,19,10,61,"message"],[30,26,10,68],[31,6,10,70,"data"],[31,10,10,74],[31,13,10,77,"_a"],[31,15,10,79],[31,16,10,80,"data"],[31,20,10,84],[32,6,10,86,"code"],[32,10,10,90],[32,13,10,93,"_a"],[32,15,10,95],[32,16,10,96,"code"],[32,20,10,100],[33,6,10,102,"error_id"],[33,14,10,110],[33,17,10,113,"_a"],[33,19,10,115],[33,20,10,116,"error_id"],[33,28,10,124],[34,4,11,4],[34,11,11,11],[34,15,11,15,"Promise"],[34,22,11,22],[34,23,11,23],[34,33,11,33,"resolve"],[34,40,11,40],[34,42,11,42,"reject"],[34,48,11,48],[34,50,11,50],[35,6,12,8],[36,6,13,8],[36,10,13,12,"status"],[36,16,13,18],[36,21,13,23],[36,30,13,32],[36,32,13,34],[37,8,14,12],[38,8,15,12],[38,12,15,16],[38,13,15,17,"data"],[38,17,15,21],[38,21,15,25],[38,22,15,26,"data"],[38,26,15,30],[38,27,15,31,"link"],[38,31,15,35],[38,33,15,37],[39,10,16,16],[39,17,16,23,"reject"],[39,23,16,29],[39,24,16,30],[39,28,16,34,"FlutterwaveInitError"],[39,48,16,54],[39,49,16,54,"default"],[39,56,16,54],[39,57,16,55],[40,12,17,20,"code"],[40,16,17,24],[40,18,17,26],[40,38,17,46],[41,12,18,20,"message"],[41,19,18,27],[41,21,18,29,"message"],[42,10,19,16],[42,11,19,17],[42,12,19,18],[42,13,19,19],[43,8,20,12],[44,8,21,12],[45,8,22,12],[45,15,22,19,"resolve"],[45,22,22,26],[45,23,22,27,"data"],[45,27,22,31],[45,28,22,32,"link"],[45,32,22,36],[45,33,22,37],[46,6,23,8],[47,6,24,8],[48,6,25,8],[48,10,25,12],[48,26,25,28],[48,27,25,29,"test"],[48,31,25,33],[48,32,25,34,"message"],[48,39,25,41],[48,40,25,42],[48,44,25,46],[48,55,25,57],[48,56,25,58,"test"],[48,60,25,62],[48,61,25,63,"message"],[48,68,25,70],[48,69,25,71],[48,71,25,73],[49,8,26,12,"reject"],[49,14,26,18],[49,15,26,19],[49,19,26,23,"FlutterwaveInitError"],[49,39,26,43],[49,40,26,43,"default"],[49,47,26,43],[49,48,26,44],[50,10,27,16,"code"],[50,14,27,20],[50,16,27,22],[50,30,27,36],[51,10,28,16,"message"],[51,17,28,23],[51,19,28,25,"message"],[52,8,29,12],[52,9,29,13],[52,10,29,14],[52,11,29,15],[53,6,30,8],[54,6,31,8],[55,6,32,8],[55,10,32,12],[55,26,32,28],[55,27,32,29,"test"],[55,31,32,33],[55,32,32,34,"message"],[55,39,32,41],[55,40,32,42],[55,44,32,46],[55,54,32,56],[55,55,32,57,"test"],[55,59,32,61],[55,60,32,62,"message"],[55,67,32,69],[55,68,32,70],[55,70,32,72],[56,8,33,12,"reject"],[56,14,33,18],[56,15,33,19],[56,19,33,23,"FlutterwaveInitError"],[56,39,33,43],[56,40,33,43,"default"],[56,47,33,43],[56,48,33,44],[57,10,34,16,"code"],[57,14,34,20],[57,16,34,22],[57,30,34,36],[58,10,35,16,"message"],[58,17,35,23],[58,19,35,25,"message"],[59,8,36,12],[59,9,36,13],[59,10,36,14],[59,11,36,15],[60,6,37,8],[61,6,38,8],[62,6,39,8],[62,10,39,12,"errors"],[62,16,39,18],[62,18,39,20],[63,8,40,12,"reject"],[63,14,40,18],[63,15,40,19],[63,19,40,23,"FlutterwaveInitError"],[63,39,40,43],[63,40,40,43,"default"],[63,47,40,43],[63,48,40,44],[64,10,41,16,"code"],[64,14,41,20],[64,16,41,22],[64,33,41,39],[65,10,42,16,"message"],[65,17,42,23],[65,19,42,25,"message"],[65,26,42,32],[66,10,43,16,"errors"],[66,16,43,22],[66,18,43,24,"errors"],[66,24,43,30],[66,25,43,31,"map"],[66,28,43,34],[66,29,43,35],[66,39,43,45,"i"],[66,40,43,46],[66,42,43,48],[67,12,43,50],[67,19,43,57,"i"],[67,20,43,58],[67,21,43,59,"message"],[67,28,43,66],[68,10,43,68],[68,11,43,69],[69,8,44,12],[69,9,44,13],[69,10,44,14],[69,11,44,15],[70,6,45,8],[71,6,46,8],[72,6,47,8,"reject"],[72,12,47,14],[72,13,47,15],[72,17,47,19,"FlutterwaveInitError"],[72,37,47,39],[72,38,47,39,"default"],[72,45,47,39],[72,46,47,40],[73,8,48,12,"code"],[73,12,48,16],[73,14,48,18,"String"],[73,20,48,24],[73,21,48,25,"code"],[73,25,48,29],[73,29,48,33],[73,50,48,54],[73,51,48,55],[73,52,48,56,"toUpperCase"],[73,63,48,67],[73,64,48,68],[73,65,48,69],[74,8,49,12,"message"],[74,15,49,19],[74,17,49,21,"message"],[74,24,49,28],[75,8,50,12,"errorId"],[75,15,50,19],[75,17,50,21,"error_id"],[76,6,51,8],[76,7,51,9],[76,8,51,10],[76,9,51,11],[77,4,52,4],[77,5,52,5],[77,6,52,6],[78,2,53,0],[79,0,53,1],[79,3]],"functionMap":{"names":["<global>","ResponseParser","Promise$argument_0","errors.map$argument_0"],"mappings":"AAA;eCQ;uBCE;mCCgC,kCD;KDS;CDC"},"hasCjsExports":false},"type":"js/module"}]}