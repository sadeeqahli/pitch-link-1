{"dependencies":[{"name":"convex/react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":40,"index":40}}],"key":"Sg7SK32EDtUGFZ9zS7dzihN8xHs=","exportNames":["*"],"imports":1}},{"name":"../../convex/_generated/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":41},"end":{"line":2,"column":50,"index":91}}],"key":"Gebe0ksdtIhjUMCMPp7noMdLU8s=","exportNames":["*"],"imports":1}},{"name":"../utils/auth/useAuth","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":153},"end":{"line":4,"column":48,"index":201}}],"key":"M7RlQ2wHNgOZ/Xfhm3/LEwmHCF0=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"useUserBookings\", {\n    enumerable: true,\n    get: function () {\n      return useUserBookings;\n    }\n  });\n  var _convexReact = require(_dependencyMap[0], \"convex/react\");\n  var _convex_generatedApi = require(_dependencyMap[1], \"../../convex/_generated/api\");\n  var _utilsAuthUseAuth = require(_dependencyMap[2], \"../utils/auth/useAuth\");\n  // Custom hook to fetch user bookings with receipts\n  var useUserBookings = () => {\n    _s();\n    var _useAuth = (0, _utilsAuthUseAuth.useAuth)(),\n      auth = _useAuth.auth;\n\n    // Check if we have a valid Convex user ID\n    var hasValidUserId = auth?.user?.id && !auth.user.id.startsWith('user_') && auth.user.id.length > 20;\n\n    // Fetch bookings - only call if we have a proper Convex ID\n    var bookingsQuery = hasValidUserId ? (0, _convexReact.useQuery)(_convex_generatedApi.api.bookings.getBookingsByUser, {\n      userId: auth.user.id\n    }) : null;\n\n    // Fetch receipts - only call if we have a proper Convex ID\n    var receiptsQuery = hasValidUserId ? (0, _convexReact.useQuery)(_convex_generatedApi.api.receipts.getReceiptsByUser, {\n      userId: auth.user.id\n    }) : null;\n\n    // Combine bookings with their receipts\n    var enrichedBookings = Array.isArray(bookingsQuery) && hasValidUserId ? bookingsQuery.map(booking => {\n      var receipt = Array.isArray(receiptsQuery) ? receiptsQuery.find(r => r.bookingId === booking._id) : null;\n      return {\n        ...booking,\n        receipt: receipt || null\n      };\n    }) : [];\n    return {\n      bookings: enrichedBookings,\n      isLoading: hasValidUserId ? !bookingsQuery || !receiptsQuery : false,\n      error: null\n    };\n  };\n  _s(useUserBookings, \"dgbBXBtOHw0z1LOBGLE4PWnklHA=\", false, function () {\n    return [_utilsAuthUseAuth.useAuth, _convexReact.useQuery, _convexReact.useQuery];\n  });\n});","lineCount":53,"map":[[8,2,7,0,"Object"],[8,8,7,0],[8,9,7,0,"defineProperty"],[8,23,7,0],[8,24,7,0,"exports"],[8,31,7,0],[9,4,7,0,"enumerable"],[9,14,7,0],[10,4,7,0,"get"],[10,7,7,0],[10,18,7,0,"get"],[10,19,7,0],[11,6,7,0],[11,13,7,0,"useUserBookings"],[11,28,7,0],[12,4,7,0],[13,2,7,0],[14,2,1,0],[14,6,1,0,"_convexReact"],[14,18,1,0],[14,21,1,0,"require"],[14,28,1,0],[14,29,1,0,"_dependencyMap"],[14,43,1,0],[15,2,2,0],[15,6,2,0,"_convex_generatedApi"],[15,26,2,0],[15,29,2,0,"require"],[15,36,2,0],[15,37,2,0,"_dependencyMap"],[15,51,2,0],[16,2,4,0],[16,6,4,0,"_utilsAuthUseAuth"],[16,23,4,0],[16,26,4,0,"require"],[16,33,4,0],[16,34,4,0,"_dependencyMap"],[16,48,4,0],[17,2,6,0],[18,2,7,7],[18,6,7,13,"useUserBookings"],[18,21,7,28],[18,24,7,31,"useUserBookings"],[18,25,7,31],[18,30,7,37],[19,4,7,37,"_s"],[19,6,7,37],[20,4,8,2],[20,8,8,2,"_useAuth"],[20,16,8,2],[20,19,8,19],[20,23,8,19,"useAuth"],[20,40,8,26],[20,41,8,26,"useAuth"],[20,48,8,26],[20,50,8,27],[20,51,8,28],[21,6,8,10,"auth"],[21,10,8,14],[21,13,8,14,"_useAuth"],[21,21,8,14],[21,22,8,10,"auth"],[21,26,8,14],[23,4,10,2],[24,4,11,2],[24,8,11,8,"hasValidUserId"],[24,22,11,22],[24,25,11,25,"auth"],[24,29,11,29],[24,31,11,31,"user"],[24,35,11,35],[24,37,11,37,"id"],[24,39,11,39],[24,43,12,4],[24,44,12,5,"auth"],[24,48,12,9],[24,49,12,10,"user"],[24,53,12,14],[24,54,12,15,"id"],[24,56,12,17],[24,57,12,18,"startsWith"],[24,67,12,28],[24,68,12,29],[24,75,12,36],[24,76,12,37],[24,80,13,4,"auth"],[24,84,13,8],[24,85,13,9,"user"],[24,89,13,13],[24,90,13,14,"id"],[24,92,13,16],[24,93,13,17,"length"],[24,99,13,23],[24,102,13,26],[24,104,13,28],[26,4,15,2],[27,4,16,2],[27,8,16,8,"bookingsQuery"],[27,21,16,21],[27,24,16,24,"hasValidUserId"],[27,38,16,38],[27,41,17,6],[27,45,17,6,"useQuery"],[27,57,17,14],[27,58,17,14,"useQuery"],[27,66,17,14],[27,68,17,15,"api"],[27,88,17,18],[27,89,17,18,"api"],[27,92,17,18],[27,93,17,19,"bookings"],[27,101,17,27],[27,102,17,28,"getBookingsByUser"],[27,119,17,45],[27,121,17,47],[28,6,17,49,"userId"],[28,12,17,55],[28,14,17,57,"auth"],[28,18,17,61],[28,19,17,62,"user"],[28,23,17,66],[28,24,17,67,"id"],[29,4,17,85],[29,5,17,86],[29,6,17,87],[29,9,18,6],[29,13,18,10],[31,4,20,2],[32,4,21,2],[32,8,21,8,"receiptsQuery"],[32,21,21,21],[32,24,21,24,"hasValidUserId"],[32,38,21,38],[32,41,22,6],[32,45,22,6,"useQuery"],[32,57,22,14],[32,58,22,14,"useQuery"],[32,66,22,14],[32,68,22,15,"api"],[32,88,22,18],[32,89,22,18,"api"],[32,92,22,18],[32,93,22,19,"receipts"],[32,101,22,27],[32,102,22,28,"getReceiptsByUser"],[32,119,22,45],[32,121,22,47],[33,6,22,49,"userId"],[33,12,22,55],[33,14,22,57,"auth"],[33,18,22,61],[33,19,22,62,"user"],[33,23,22,66],[33,24,22,67,"id"],[34,4,22,85],[34,5,22,86],[34,6,22,87],[34,9,23,6],[34,13,23,10],[36,4,25,2],[37,4,26,2],[37,8,26,8,"enrichedBookings"],[37,24,26,24],[37,27,26,27,"Array"],[37,32,26,32],[37,33,26,33,"isArray"],[37,40,26,40],[37,41,26,41,"bookingsQuery"],[37,54,26,54],[37,55,26,55],[37,59,26,59,"hasValidUserId"],[37,73,26,73],[37,76,27,6,"bookingsQuery"],[37,89,27,19],[37,90,27,20,"map"],[37,93,27,23],[37,94,27,25,"booking"],[37,101,27,37],[37,105,27,42],[38,6,28,8],[38,10,28,14,"receipt"],[38,17,28,21],[38,20,28,24,"Array"],[38,25,28,29],[38,26,28,30,"isArray"],[38,33,28,37],[38,34,28,38,"receiptsQuery"],[38,47,28,51],[38,48,28,52],[38,51,29,12,"receiptsQuery"],[38,64,29,25],[38,65,29,26,"find"],[38,69,29,30],[38,70,29,32,"r"],[38,71,29,38],[38,75,29,43,"r"],[38,76,29,44],[38,77,29,45,"bookingId"],[38,86,29,54],[38,91,29,59,"booking"],[38,98,29,66],[38,99,29,67,"_id"],[38,102,29,70],[38,103,29,71],[38,106,30,12],[38,110,30,16],[39,6,31,8],[39,13,31,15],[40,8,32,10],[40,11,32,13,"booking"],[40,18,32,20],[41,8,33,10,"receipt"],[41,15,33,17],[41,17,33,19,"receipt"],[41,24,33,26],[41,28,33,30],[42,6,34,8],[42,7,34,9],[43,4,35,6],[43,5,35,7],[43,6,35,8],[43,9,36,6],[43,11,36,8],[44,4,38,2],[44,11,38,9],[45,6,39,4,"bookings"],[45,14,39,12],[45,16,39,14,"enrichedBookings"],[45,32,39,30],[46,6,40,4,"isLoading"],[46,15,40,13],[46,17,40,15,"hasValidUserId"],[46,31,40,29],[46,34,40,33],[46,35,40,34,"bookingsQuery"],[46,48,40,47],[46,52,40,51],[46,53,40,52,"receiptsQuery"],[46,66,40,65],[46,69,40,69],[46,74,40,74],[47,6,41,4,"error"],[47,11,41,9],[47,13,41,11],[48,4,42,2],[48,5,42,3],[49,2,43,0],[49,3,43,1],[50,2,43,2,"_s"],[50,4,43,2],[50,5,7,13,"useUserBookings"],[50,20,7,28],[51,4,7,28],[51,12,8,19,"useAuth"],[51,29,8,26],[51,30,8,26,"useAuth"],[51,37,8,26],[51,39,17,6,"useQuery"],[51,51,17,14],[51,52,17,14,"useQuery"],[51,60,17,14],[51,62,22,6,"useQuery"],[51,74,22,14],[51,75,22,14,"useQuery"],[51,83,22,14],[52,2,22,14],[53,0,22,14],[53,3]],"functionMap":{"names":["<global>","useUserBookings","bookingsQuery.map$argument_0","receiptsQuery.find$argument_0"],"mappings":"AAA;+BCM;wBCoB;+BCE,uCD;ODM;CDQ"},"hasCjsExports":false},"type":"js/module"}]}