{"dependencies":[{"name":"../../values/index.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":27,"column":20,"index":1085},"end":{"line":27,"column":52,"index":1117}}],"key":"5ivjK8omhTrYdxQY3jKyNZKxy5Y=","exportNames":["*"],"imports":1}},{"name":"../long.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":28,"column":18,"index":1137},"end":{"line":28,"column":39,"index":1158}}],"key":"kSGkeXfrycuoPMMz2XLcBQ7TYBM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var __defProp = Object.defineProperty;\n  var __getOwnPropDesc = Object.getOwnPropertyDescriptor;\n  var __getOwnPropNames = Object.getOwnPropertyNames;\n  var __hasOwnProp = Object.prototype.hasOwnProperty;\n  var __export = (target, all) => {\n    for (var name in all) __defProp(target, name, {\n      get: all[name],\n      enumerable: true\n    });\n  };\n  var __copyProps = (to, from, except, desc) => {\n    if (from && typeof from === \"object\" || typeof from === \"function\") {\n      var _loop = function (key) {\n        if (!__hasOwnProp.call(to, key) && key !== except) __defProp(to, key, {\n          get: () => from[key],\n          enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable\n        });\n      };\n      for (var key of __getOwnPropNames(from)) {\n        _loop(key);\n      }\n    }\n    return to;\n  };\n  var __toCommonJS = mod => __copyProps(__defProp({}, \"__esModule\", {\n    value: true\n  }), mod);\n  var protocol_exports = {};\n  __export(protocol_exports, {\n    encodeClientMessage: () => encodeClientMessage,\n    longToU64: () => longToU64,\n    parseServerMessage: () => parseServerMessage,\n    u64ToLong: () => u64ToLong\n  });\n  module.exports = __toCommonJS(protocol_exports);\n  var import_values = require(_dependencyMap[0], \"../../values/index.js\");\n  var import_long = require(_dependencyMap[1], \"../long.js\");\n  function u64ToLong(encoded) {\n    var integerBytes = import_values.Base64.toByteArray(encoded);\n    return import_long.Long.fromBytesLE(Array.from(integerBytes));\n  }\n  function longToU64(raw) {\n    var integerBytes = new Uint8Array(raw.toBytesLE());\n    return import_values.Base64.fromByteArray(integerBytes);\n  }\n  function parseServerMessage(encoded) {\n    switch (encoded.type) {\n      case \"FatalError\":\n      case \"AuthError\":\n      case \"ActionResponse\":\n      case \"Ping\":\n        {\n          return {\n            ...encoded\n          };\n        }\n      case \"MutationResponse\":\n        {\n          if (encoded.success) {\n            return {\n              ...encoded,\n              ts: u64ToLong(encoded.ts)\n            };\n          } else {\n            return {\n              ...encoded\n            };\n          }\n        }\n      case \"Transition\":\n        {\n          return {\n            ...encoded,\n            startVersion: {\n              ...encoded.startVersion,\n              ts: u64ToLong(encoded.startVersion.ts)\n            },\n            endVersion: {\n              ...encoded.endVersion,\n              ts: u64ToLong(encoded.endVersion.ts)\n            }\n          };\n        }\n      default:\n        {\n          encoded;\n        }\n    }\n    return void 0;\n  }\n  function encodeClientMessage(message) {\n    switch (message.type) {\n      case \"Authenticate\":\n      case \"ModifyQuerySet\":\n      case \"Mutation\":\n      case \"Action\":\n      case \"Event\":\n        {\n          return {\n            ...message\n          };\n        }\n      case \"Connect\":\n        {\n          if (message.maxObservedTimestamp !== void 0) {\n            return {\n              ...message,\n              maxObservedTimestamp: longToU64(message.maxObservedTimestamp)\n            };\n          } else {\n            return {\n              ...message,\n              maxObservedTimestamp: void 0\n            };\n          }\n        }\n      default:\n        {\n          message;\n        }\n    }\n    return void 0;\n  }\n});","lineCount":127,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0],[4,6,2,4,"__defProp"],[4,15,2,13],[4,18,2,16,"Object"],[4,24,2,22],[4,25,2,23,"defineProperty"],[4,39,2,37],[5,2,3,0],[5,6,3,4,"__getOwnPropDesc"],[5,22,3,20],[5,25,3,23,"Object"],[5,31,3,29],[5,32,3,30,"getOwnPropertyDescriptor"],[5,56,3,54],[6,2,4,0],[6,6,4,4,"__getOwnPropNames"],[6,23,4,21],[6,26,4,24,"Object"],[6,32,4,30],[6,33,4,31,"getOwnPropertyNames"],[6,52,4,50],[7,2,5,0],[7,6,5,4,"__hasOwnProp"],[7,18,5,16],[7,21,5,19,"Object"],[7,27,5,25],[7,28,5,26,"prototype"],[7,37,5,35],[7,38,5,36,"hasOwnProperty"],[7,52,5,50],[8,2,6,0],[8,6,6,4,"__export"],[8,14,6,12],[8,17,6,15,"__export"],[8,18,6,16,"target"],[8,24,6,22],[8,26,6,24,"all"],[8,29,6,27],[8,34,6,32],[9,4,7,2],[9,9,7,7],[9,13,7,11,"name"],[9,17,7,15],[9,21,7,19,"all"],[9,24,7,22],[9,26,8,4,"__defProp"],[9,35,8,13],[9,36,8,14,"target"],[9,42,8,20],[9,44,8,22,"name"],[9,48,8,26],[9,50,8,28],[10,6,8,30,"get"],[10,9,8,33],[10,11,8,35,"all"],[10,14,8,38],[10,15,8,39,"name"],[10,19,8,43],[10,20,8,44],[11,6,8,46,"enumerable"],[11,16,8,56],[11,18,8,58],[12,4,8,63],[12,5,8,64],[12,6,8,65],[13,2,9,0],[13,3,9,1],[14,2,10,0],[14,6,10,4,"__copyProps"],[14,17,10,15],[14,20,10,18,"__copyProps"],[14,21,10,19,"to"],[14,23,10,21],[14,25,10,23,"from"],[14,29,10,27],[14,31,10,29,"except"],[14,37,10,35],[14,39,10,37,"desc"],[14,43,10,41],[14,48,10,46],[15,4,11,2],[15,8,11,6,"from"],[15,12,11,10],[15,16,11,14],[15,23,11,21,"from"],[15,27,11,25],[15,32,11,30],[15,40,11,38],[15,44,11,42],[15,51,11,49,"from"],[15,55,11,53],[15,60,11,58],[15,70,11,68],[15,72,11,70],[16,6,11,70],[16,10,11,70,"_loop"],[16,15,11,70],[16,27,11,70,"_loop"],[16,28,11,70,"key"],[16,31,11,70],[17,8,13,6],[17,12,13,10],[17,13,13,11,"__hasOwnProp"],[17,25,13,23],[17,26,13,24,"call"],[17,30,13,28],[17,31,13,29,"to"],[17,33,13,31],[17,35,13,33,"key"],[17,38,13,36],[17,39,13,37],[17,43,13,41,"key"],[17,46,13,44],[17,51,13,49,"except"],[17,57,13,55],[17,59,14,8,"__defProp"],[17,68,14,17],[17,69,14,18,"to"],[17,71,14,20],[17,73,14,22,"key"],[17,76,14,25],[17,78,14,27],[18,10,14,29,"get"],[18,13,14,32],[18,15,14,34,"get"],[18,16,14,34],[18,21,14,40,"from"],[18,25,14,44],[18,26,14,45,"key"],[18,29,14,48],[18,30,14,49],[19,10,14,51,"enumerable"],[19,20,14,61],[19,22,14,63],[19,24,14,65,"desc"],[19,28,14,69],[19,31,14,72,"__getOwnPropDesc"],[19,47,14,88],[19,48,14,89,"from"],[19,52,14,93],[19,54,14,95,"key"],[19,57,14,98],[19,58,14,99],[19,59,14,100],[19,63,14,104,"desc"],[19,67,14,108],[19,68,14,109,"enumerable"],[20,8,14,120],[20,9,14,121],[20,10,14,122],[21,6,14,123],[22,6,12,4],[22,11,12,9],[22,15,12,13,"key"],[22,18,12,16],[22,22,12,20,"__getOwnPropNames"],[22,39,12,37],[22,40,12,38,"from"],[22,44,12,42],[22,45,12,43],[23,8,12,43,"_loop"],[23,13,12,43],[23,14,12,43,"key"],[23,17,12,43],[24,6,12,43],[25,4,15,2],[26,4,16,2],[26,11,16,9,"to"],[26,13,16,11],[27,2,17,0],[27,3,17,1],[28,2,18,0],[28,6,18,4,"__toCommonJS"],[28,18,18,16],[28,21,18,20,"mod"],[28,24,18,23],[28,28,18,28,"__copyProps"],[28,39,18,39],[28,40,18,40,"__defProp"],[28,49,18,49],[28,50,18,50],[28,51,18,51],[28,52,18,52],[28,54,18,54],[28,66,18,66],[28,68,18,68],[29,4,18,70,"value"],[29,9,18,75],[29,11,18,77],[30,2,18,82],[30,3,18,83],[30,4,18,84],[30,6,18,86,"mod"],[30,9,18,89],[30,10,18,90],[31,2,19,0],[31,6,19,4,"protocol_exports"],[31,22,19,20],[31,25,19,23],[31,26,19,24],[31,27,19,25],[32,2,20,0,"__export"],[32,10,20,8],[32,11,20,9,"protocol_exports"],[32,27,20,25],[32,29,20,27],[33,4,21,2,"encodeClientMessage"],[33,23,21,21],[33,25,21,23,"encodeClientMessage"],[33,26,21,23],[33,31,21,29,"encodeClientMessage"],[33,50,21,48],[34,4,22,2,"longToU64"],[34,13,22,11],[34,15,22,13,"longToU64"],[34,16,22,13],[34,21,22,19,"longToU64"],[34,30,22,28],[35,4,23,2,"parseServerMessage"],[35,22,23,20],[35,24,23,22,"parseServerMessage"],[35,25,23,22],[35,30,23,28,"parseServerMessage"],[35,48,23,46],[36,4,24,2,"u64ToLong"],[36,13,24,11],[36,15,24,13,"u64ToLong"],[36,16,24,13],[36,21,24,19,"u64ToLong"],[37,2,25,0],[37,3,25,1],[37,4,25,2],[38,2,26,0,"module"],[38,8,26,6],[38,9,26,7,"exports"],[38,16,26,14],[38,19,26,17,"__toCommonJS"],[38,31,26,29],[38,32,26,30,"protocol_exports"],[38,48,26,46],[38,49,26,47],[39,2,27,0],[39,6,27,4,"import_values"],[39,19,27,17],[39,22,27,20,"require"],[39,29,27,27],[39,30,27,27,"_dependencyMap"],[39,44,27,27],[39,72,27,51],[39,73,27,52],[40,2,28,0],[40,6,28,4,"import_long"],[40,17,28,15],[40,20,28,18,"require"],[40,27,28,25],[40,28,28,25,"_dependencyMap"],[40,42,28,25],[40,59,28,38],[40,60,28,39],[41,2,29,0],[41,11,29,9,"u64ToLong"],[41,20,29,18,"u64ToLong"],[41,21,29,19,"encoded"],[41,28,29,26],[41,30,29,28],[42,4,30,2],[42,8,30,8,"integerBytes"],[42,20,30,20],[42,23,30,23,"import_values"],[42,36,30,36],[42,37,30,37,"Base64"],[42,43,30,43],[42,44,30,44,"toByteArray"],[42,55,30,55],[42,56,30,56,"encoded"],[42,63,30,63],[42,64,30,64],[43,4,31,2],[43,11,31,9,"import_long"],[43,22,31,20],[43,23,31,21,"Long"],[43,27,31,25],[43,28,31,26,"fromBytesLE"],[43,39,31,37],[43,40,31,38,"Array"],[43,45,31,43],[43,46,31,44,"from"],[43,50,31,48],[43,51,31,49,"integerBytes"],[43,63,31,61],[43,64,31,62],[43,65,31,63],[44,2,32,0],[45,2,33,0],[45,11,33,9,"longToU64"],[45,20,33,18,"longToU64"],[45,21,33,19,"raw"],[45,24,33,22],[45,26,33,24],[46,4,34,2],[46,8,34,8,"integerBytes"],[46,20,34,20],[46,23,34,23],[46,27,34,27,"Uint8Array"],[46,37,34,37],[46,38,34,38,"raw"],[46,41,34,41],[46,42,34,42,"toBytesLE"],[46,51,34,51],[46,52,34,52],[46,53,34,53],[46,54,34,54],[47,4,35,2],[47,11,35,9,"import_values"],[47,24,35,22],[47,25,35,23,"Base64"],[47,31,35,29],[47,32,35,30,"fromByteArray"],[47,45,35,43],[47,46,35,44,"integerBytes"],[47,58,35,56],[47,59,35,57],[48,2,36,0],[49,2,37,0],[49,11,37,9,"parseServerMessage"],[49,29,37,27,"parseServerMessage"],[49,30,37,28,"encoded"],[49,37,37,35],[49,39,37,37],[50,4,38,2],[50,12,38,10,"encoded"],[50,19,38,17],[50,20,38,18,"type"],[50,24,38,22],[51,6,39,4],[51,11,39,9],[51,23,39,21],[52,6,40,4],[52,11,40,9],[52,22,40,20],[53,6,41,4],[53,11,41,9],[53,27,41,25],[54,6,42,4],[54,11,42,9],[54,17,42,15],[55,8,42,17],[56,10,43,6],[56,17,43,13],[57,12,43,15],[57,15,43,18,"encoded"],[58,10,43,26],[58,11,43,27],[59,8,44,4],[60,6,45,4],[60,11,45,9],[60,29,45,27],[61,8,45,29],[62,10,46,6],[62,14,46,10,"encoded"],[62,21,46,17],[62,22,46,18,"success"],[62,29,46,25],[62,31,46,27],[63,12,47,8],[63,19,47,15],[64,14,47,17],[64,17,47,20,"encoded"],[64,24,47,27],[65,14,47,29,"ts"],[65,16,47,31],[65,18,47,33,"u64ToLong"],[65,27,47,42],[65,28,47,43,"encoded"],[65,35,47,50],[65,36,47,51,"ts"],[65,38,47,53],[66,12,47,55],[66,13,47,56],[67,10,48,6],[67,11,48,7],[67,17,48,13],[68,12,49,8],[68,19,49,15],[69,14,49,17],[69,17,49,20,"encoded"],[70,12,49,28],[70,13,49,29],[71,10,50,6],[72,8,51,4],[73,6,52,4],[73,11,52,9],[73,23,52,21],[74,8,52,23],[75,10,53,6],[75,17,53,13],[76,12,54,8],[76,15,54,11,"encoded"],[76,22,54,18],[77,12,55,8,"startVersion"],[77,24,55,20],[77,26,55,22],[78,14,56,10],[78,17,56,13,"encoded"],[78,24,56,20],[78,25,56,21,"startVersion"],[78,37,56,33],[79,14,57,10,"ts"],[79,16,57,12],[79,18,57,14,"u64ToLong"],[79,27,57,23],[79,28,57,24,"encoded"],[79,35,57,31],[79,36,57,32,"startVersion"],[79,48,57,44],[79,49,57,45,"ts"],[79,51,57,47],[80,12,58,8],[80,13,58,9],[81,12,59,8,"endVersion"],[81,22,59,18],[81,24,59,20],[82,14,60,10],[82,17,60,13,"encoded"],[82,24,60,20],[82,25,60,21,"endVersion"],[82,35,60,31],[83,14,61,10,"ts"],[83,16,61,12],[83,18,61,14,"u64ToLong"],[83,27,61,23],[83,28,61,24,"encoded"],[83,35,61,31],[83,36,61,32,"endVersion"],[83,46,61,42],[83,47,61,43,"ts"],[83,49,61,45],[84,12,62,8],[85,10,63,6],[85,11,63,7],[86,8,64,4],[87,6,65,4],[88,8,65,13],[89,10,66,6,"encoded"],[89,17,66,13],[90,8,67,4],[91,4,68,2],[92,4,69,2],[92,11,69,9],[92,16,69,14],[92,17,69,15],[93,2,70,0],[94,2,71,0],[94,11,71,9,"encodeClientMessage"],[94,30,71,28,"encodeClientMessage"],[94,31,71,29,"message"],[94,38,71,36],[94,40,71,38],[95,4,72,2],[95,12,72,10,"message"],[95,19,72,17],[95,20,72,18,"type"],[95,24,72,22],[96,6,73,4],[96,11,73,9],[96,25,73,23],[97,6,74,4],[97,11,74,9],[97,27,74,25],[98,6,75,4],[98,11,75,9],[98,21,75,19],[99,6,76,4],[99,11,76,9],[99,19,76,17],[100,6,77,4],[100,11,77,9],[100,18,77,16],[101,8,77,18],[102,10,78,6],[102,17,78,13],[103,12,78,15],[103,15,78,18,"message"],[104,10,78,26],[104,11,78,27],[105,8,79,4],[106,6,80,4],[106,11,80,9],[106,20,80,18],[107,8,80,20],[108,10,81,6],[108,14,81,10,"message"],[108,21,81,17],[108,22,81,18,"maxObservedTimestamp"],[108,42,81,38],[108,47,81,43],[108,52,81,48],[108,53,81,49],[108,55,81,51],[109,12,82,8],[109,19,82,15],[110,14,83,10],[110,17,83,13,"message"],[110,24,83,20],[111,14,84,10,"maxObservedTimestamp"],[111,34,84,30],[111,36,84,32,"longToU64"],[111,45,84,41],[111,46,84,42,"message"],[111,53,84,49],[111,54,84,50,"maxObservedTimestamp"],[111,74,84,70],[112,12,85,8],[112,13,85,9],[113,10,86,6],[113,11,86,7],[113,17,86,13],[114,12,87,8],[114,19,87,15],[115,14,87,17],[115,17,87,20,"message"],[115,24,87,27],[116,14,87,29,"maxObservedTimestamp"],[116,34,87,49],[116,36,87,51],[116,41,87,56],[117,12,87,58],[117,13,87,59],[118,10,88,6],[119,8,89,4],[120,6,90,4],[121,8,90,13],[122,10,91,6,"message"],[122,17,91,13],[123,8,92,4],[124,4,93,2],[125,4,94,2],[125,11,94,9],[125,16,94,14],[125,17,94,15],[126,2,95,0],[127,0,95,1],[127,3]],"functionMap":{"names":["<global>","__export","__copyProps","__defProp$argument_2.get","__toCommonJS","__export$argument_1.encodeClientMessage","__export$argument_1.longToU64","__export$argument_1.parseServerMessage","__export$argument_1.u64ToLong","u64ToLong","longToU64","parseServerMessage","encodeClientMessage"],"mappings":"AAA;eCK;CDG;kBEC;kCCI,eD;CFG;mBIC,uEJ;uBKG,yBL;aMC,eN;sBOC,wBP;aQC,eR;ASK;CTG;AUC;CVG;AWC;CXiC;AYC;CZwB"},"hasCjsExports":true},"type":"js/module"}]}